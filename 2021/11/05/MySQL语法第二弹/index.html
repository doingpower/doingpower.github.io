<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="meta,metauniverse,java,lzp,自学">
    <meta name="description" content="这是Nico Liao的个人博客空间。">
    <meta name="author" content="Nico Liao">
    
    <title>
        
            MySQL语法第二弹 |
        
        Nico&#39;s Zone
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/qe2.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"www.lzp.zone","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/touxiang.svg","favicon":"/images/qe2.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":true},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"坐礁边，吹海风，数日落，与你，静候朝晖"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Nico‘s Zone" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/qe2.svg">
                </a>
            
            <a class="logo-title" href="/">
                Nico&#39;s Zone
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/%E9%9A%8F%E7%AC%94"
                            >
                                随笔
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/%E9%9A%8F%E7%AC%94">随笔</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">MySQL语法第二弹</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/touxiang.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Nico Liao</span>
                        
                            <span class="author-label">writer</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-11-05 16:18:05
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>&nbsp;
                    </li>
                
                    <li>
                        &gt; <a href="/categories/%E6%8A%80%E6%9C%AF/%E7%AC%94%E8%AE%B0/">笔记</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/MySQL/">MySQL</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/SQL/">SQL</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>5.2k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>25 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <blockquote>
<p>根据老杜MySQL教学视频整理</p>
</blockquote>
<p>1、关于查询结果集的去重?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct job from emp; // distinct关键字去除重复记录。</span><br><span class="line">+-----------+</span><br><span class="line">| job       |</span><br><span class="line">+-----------+</span><br><span class="line">| CLERK     |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| ANALYST   |</span><br><span class="line">| PRESIDENT |</span><br><span class="line">+-----------+</span><br></pre></td></tr></table></figure>

<p><code>mysql&gt; select ename,distinct job from emp; </code></p>
<p>以上的sql语句是错误的。 记住:</p>
<p><code>distinct</code>只能出现在所有字段的最前面。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct deptno,job from emp;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| deptno | job       |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|     20 | CLERK     |</span><br><span class="line">|     30 | SALESMAN  |</span><br><span class="line">|     20 | MANAGER   |</span><br><span class="line">|     30 | MANAGER   |</span><br><span class="line">|     10 | MANAGER   |</span><br><span class="line">|     20 | ANALYST   |</span><br><span class="line">|     10 | PRESIDENT |</span><br><span class="line">|     30 | CLERK     |</span><br><span class="line">|     10 | CLERK     |</span><br><span class="line">+--------+-----------+</span><br></pre></td></tr></table></figure>
<p>   案例:统计岗位的数量?</p>
<p><code>select count(distinct job) from emp;</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| count(distinct job) |</span><br><span class="line">+---------------------+ </span><br><span class="line">|5                    |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure>
<p>  2、连接查询</p>
<p>  2.1、什么是连接查询? 在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合</p>
<p>查询取出最终的结果。<br>       在实际开发中，一般一个业务都会对应多张表，比如:学生和班级，起码两张表。学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的冗余。</p>
<p>2.2、连接查询的分类? 根据语法出现的年代来划分的话，包括:</p>
<ul>
<li><p>SQL92(一些老的DBA可能还在使用这种语法。DBA:DataBase Administrator，数据库管理员)</p>
</li>
<li><p>SQL99(比较新的语法)</p>
</li>
</ul>
<p> 根据表的连接方式来划分，包括:<br>      1. 内连接:<br>           - 等值连接<br>           - 非等值连接<br>           - 自连接<br>            2. 外连接:<br>                 左外连接(左连接)<br>                 右外连接(右连接)<br>                3 .全连接(这个不讲，很少用!)</p>
<p>2.3、在表的连接查询方面有一种现象被称为:笛卡尔积现象。(笛卡尔乘积现象)</p>
<p>笛卡尔积现象:当两张表进行连接查询的时候，没有任何条件进行限制，最终的查询结果条数<br>是两张表记录条数的乘积。</p>
<p>关于表的别名:<code>select e.ename,d.dname from emp e,dept d;</code></p>
<p>表的别名有什么好处?<br>          第一:执行效率高。</p>
<p>​          第二:可读性好。</p>
<p>2.4、怎么避免笛卡尔积现象?当然是加条件进行过滤。 思考:避免了笛卡尔积现象，会减少记录的匹配次数吗?</p>
<p>不会，次数还是56次。只不过显示的是有效记录。</p>
<p>案例:找出每一个员工的部⻔名称，要求显示员工名和部⻔名。</p>
<p>select<br>                 e.ename,d.dname</p>
<p>from where</p>
<p>​                  emp e , dept d</p>
<p>e.deptno = d.deptno; //SQL92，以后不用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure>

<p>2.5、内连接之等值连接:最大特点是:条件是等量关系。</p>
<p>案例:查询每个员工的部⻔名称，要求显示员工名和部⻔名。</p>
<p>SQL92:(太老，不用了) select</p>
<p>from where</p>
<p>SQL99:(常用的) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">e.ename,d.dname</span><br><span class="line">emp e, dept d</span><br><span class="line">e.deptno = d.deptno;</span><br><span class="line">e.ename,d.dname</span><br></pre></td></tr></table></figure>

<p>from<br> emp e</p>
<p>join<br> dept d</p>
<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>

<p>// inner可以省略的，带着inner目的是可读性好一些。 select</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.ename,d.dname</span><br></pre></td></tr></table></figure>

<p>from<br> emp e</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inner join</span><br><span class="line">        dept d</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>

<p>语法:</p>
<p>on</p>
<p>where</p>
<p>…<br> A</p>
<p>join<br> B</p>
<p>连接条件</p>
<p>… SQL99语法结构更清晰一些:表的连接条件和后来的where条件分离了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure>

<p>2.6、内连接之非等值连接:最大的特点是:连接条件中的关系是非等量关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">案例:找出每个员工的工资等级，要求显示员工名、工资、工资等级。</span><br></pre></td></tr></table></figure>

<p>mysql&gt; select ename,sal from emp; e +——–+———+<br> |ename |sal | +——–+———+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">| SMITH  |  800.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br><span class="line">mysql&gt; select * from salgrade; s</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">| GRADE | LOSAL | HISAL |</span><br><span class="line">+-------+-------+-------+</span><br></pre></td></tr></table></figure>

<p>| 1|700|1200|</p>
<ul>
<li>|  2| 1201| 1400|</li>
<li>|  3| 1401| 2000|</li>
<li>|  4| 2001| 3000|</li>
</ul>
<p>| 5| 3001| 9999| +——-+——-+——-+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">        e.ename,e.sal,s.grade</span><br></pre></td></tr></table></figure>

<p>from<br> emp e</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">join</span><br><span class="line">        salgrade s</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.sal between s.losal and s.hisal;</span><br></pre></td></tr></table></figure>

<p>// inner可以省略 select</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.ename,e.sal,s.grade</span><br></pre></td></tr></table></figure>

<p>from<br> emp e</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inner join</span><br><span class="line">        salgrade s</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.sal between s.losal and s.hisal;</span><br></pre></td></tr></table></figure>

<p>+——–+———+——-+ | ename | sal | grade | +——–+———+——-+ | SMITH | 800.00 | 1| | ALLEN | 1600.00 | 3| |WARD |1250.00| 2| | JONES | 2975.00 | 4| | MARTIN | 1250.00 | 2| | BLAKE | 2850.00 | 4| | CLARK | 2450.00 | 4| | SCOTT | 3000.00 | 4| |KING |5000.00| 5| | TURNER | 1500.00 | 3| | ADAMS | 1100.00 | 1| | JAMES | 950.00 | 1| |FORD |3000.00| 4| | MILLER | 1300.00 | 2| +——–+———+——-+</p>
<p>2.7、自连接:最大的特点是:一张表看做两张表。自己连接自己。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">案例:找出每个员工的上级领导，要求显示员工名和对应的领导名。</span><br></pre></td></tr></table></figure>

<p>mysql&gt; select empno,ename,mgr from emp; emp a 员工表<br> +——-+——–+——+<br> | empno | ename | mgr | +——-+——–+——+</p>
<p>| 7369 | SMITH | 7902 | | 7499 | ALLEN | 7698 | | 7521|WARD |7698| | 7566 | JONES | 7839 |</p>
<p>| 7654|MARTIN|7698| | 7698 | BLAKE | 7839 | | 7782 | CLARK | 7839 | | 7788 | SCOTT | 7566 | | 7839|KING |NULL| | 7844|TURNER|7698| | 7876 | ADAMS | 7788 | | 7900 | JAMES | 7698 | | 7902|FORD |7566| | 7934|MILLER|7782| +——-+——–+——+ emp b 领导表 +——-+——–+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">| empno | ename  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">|  7698 | BLAKE  |</span><br><span class="line">|  7782 | CLARK  |</span><br><span class="line">|  7788 | SCOTT  |</span><br><span class="line">|  7839 | KING   |</span><br><span class="line">|  7902 | FORD   |</span><br><span class="line">+-------+--------+</span><br></pre></td></tr></table></figure>

<p>员工的领导编号 = 领导的员工编号 select</p>
<p>a.ename as ‘员工名’,b.ename as ‘领导名’</p>
<p>from<br> emp a</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inner join</span><br><span class="line">        emp b</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>+——–+——–+ | 员工名 | 领导名 | +——–+——–+ |SMITH |FORD | | ALLEN | BLAKE | |WARD |BLAKE| |JONES |KING | | MARTIN | BLAKE | |BLAKE |KING | |CLARK |KING | | SCOTT | JONES | | TURNER | BLAKE | | ADAMS | SCOTT | | JAMES | BLAKE | |FORD |JONES| | MILLER | CLARK | +——–+——–+</p>
<p>2.8、外连接?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">什么是外连接，和内连接有什么区别?</span><br><span class="line">     内连接:</span><br></pre></td></tr></table></figure>

<p>假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的 记录查询出来，这就是内连接。</p>
<p>AB两张表没有主副之分，两张表是平等的。 外连接:</p>
<p>假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主 表，一张表是副表，主要查询主表中</p>
<p>的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配 上，副表自动模拟出NULL与之匹配。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     外连接的分类?</span><br><span class="line">          左外连接(左连接):表示左边的这张表是主表。</span><br><span class="line">          右外连接(右连接):表示右边的这张表是主表。</span><br><span class="line">          左连接有右连接的写法，右连接也会有对应的左连接的写法。</span><br><span class="line">案例:找出每个员工的上级领导?(所有员工必须全部查询出来。)</span><br></pre></td></tr></table></figure>

<p>emp a 员工表 +——-+——–+——+ | empno | ename | mgr | +——-+——–+——+ | 7369 | SMITH | 7902 | | 7499 | ALLEN | 7698 | | 7521|WARD |7698| | 7566 | JONES | 7839 | | 7654|MARTIN|7698| | 7698 | BLAKE | 7839 | | 7782 | CLARK | 7839 | | 7788 | SCOTT | 7566 | | 7839|KING |NULL| | 7844|TURNER|7698| | 7876 | ADAMS | 7788 | | 7900 | JAMES | 7698 | | 7902|FORD |7566| | 7934|MILLER|7782| +——-+——–+——+ emp b 领导表 +——-+——–+<br> | empno | ename | +——-+——–+<br> | 7566 | JONES |<br> | 7698 | BLAKE |<br> | 7782 | CLARK |<br> | 7788 | SCOTT |<br> | 7839 | KING |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|  7902 | FORD   |</span><br><span class="line">+-------+--------+</span><br></pre></td></tr></table></figure>

<p>内连接:</p>
<p>select<br> a.ename ‘员工’, b.ename ‘领导’</p>
<p>from<br> emp a</p>
<p>join<br> emp b</p>
<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>外连接:(左外连接/左连接) select</p>
<p>a.ename ‘员工’, b.ename ‘领导’</p>
<p>from<br> emp a</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left join</span><br><span class="line">        emp b</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>// outer是可以省略的。 select</p>
<p>a.ename ‘员工’, b.ename ‘领导’</p>
<p>from<br> emp a</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left outer join</span><br><span class="line">        emp b</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>外连接:(右外连接/右连接) select</p>
<p>a.ename ‘员工’, b.ename ‘领导’</p>
<p>from<br> emp b</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">right join</span><br><span class="line">        emp a</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>// outer可以省略。 select</p>
<p>a.ename ‘员工’, b.ename ‘领导’</p>
<p>from<br> emp b</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">right outer join</span><br><span class="line">        emp a</span><br></pre></td></tr></table></figure>

<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>+——–+——-+ |员工 |领导 | +——–+——-+ |SMITH |FORD |<br> | ALLEN | BLAKE |<br> | WARD | BLAKE | |JONES |KING |<br> | MARTIN | BLAKE | |BLAKE |KING | |CLARK |KING |<br> | SCOTT | JONES | |KING |NULL|<br> | TURNER | BLAKE |<br> | ADAMS | SCOTT |<br> | JAMES | BLAKE |<br> | FORD | JONES |<br> | MILLER | CLARK | +——–+——-+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">外连接最重要的特点是:主表的数据无条件的全部查询出来。</span><br></pre></td></tr></table></figure>

<p>案例:找出哪个部⻔没有员工? EMP表</p>
<p>+——-+——–+———–+——+————+——— +———+——–+<br> |EMPNO|ENAME |JOB |MGR |HIREDATE |SAL |COMM | DEPTNO | +——-+——–+———–+——+————+——— +———+——–+</p>
<p>| 7369 | SMITH | CLERK | 7902 | 1980-12-17 | 800.00 | NULL | 20|<br> | 7499 | ALLEN | SALESMAN | 7698 | 1981-02-20 | 1600.00 | 300.00 | 30|</p>
<p>| 7521 | WARD | SALESMAN | 7698 | 1981-02-22 | 1250.00 | 500.00 | 30|<br> | 7566 | JONES | MANAGER | 7839 | 1981-04-02 | 2975.00 | NULL | 20|</p>
<p>| 7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 | 30|<br> | 7698 | BLAKE | MANAGER | 7839 | 1981-05-01 | 2850.00 | NULL | 30|</p>
<p>| 7782 | CLARK | MANAGER | 7839 | 1981-06-09 | 2450.00 | NULL | 10|<br> | 7788 | SCOTT | ANALYST | 7566 | 1987-04-19 | 3000.00 | NULL | 20|</p>
<p>| 7839 | KING | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL | 10|<br> | 7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 | 0.00 | 30|</p>
<p>| 7876 | ADAMS | CLERK | 7788 | 1987-05-23 | 1100.00 | NULL | 20|<br> | 7900 | JAMES | CLERK | 7698 | 1981-12-03 | 950.00 | NULL</p>
<p>| 30|<br> | 7902 | FORD | ANALYST | 7566 | 1981-12-03 | 3000.00 | NULL | 20|<br> | 7934 | MILLER | CLERK | 7782 | 1982-01-23 | 1300.00 | NULL | 10| +——-+——–+———–+——+————+——— +———+——–+<br> DEPT<br> +——–+————+———-+<br> | DEPTNO | DNAME | LOC | +——–+————+———-+</p>
<ul>
<li><p>```<br>|      10 | ACCOUNTING | NEW YORK |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      20 | RESEARCH   | DALLAS   |</span><br></pre></td></tr></table></figure></li>
<li><p>```<br>|      30 | SALES      | CHICAGO  |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      40 | OPERATIONS | BOSTON   |</span><br><span class="line">  +--------+------------+----------+</span><br></pre></td></tr></table></figure>

<p>select<br> d.*</p>
<p>from<br> emp e</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">right join</span><br><span class="line">        dept d</span><br></pre></td></tr></table></figure></li>
</ul>
<p>on where</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno</span><br><span class="line">e.empno is null;</span><br><span class="line">+--------+------------+--------+</span><br><span class="line">| DEPTNO | DNAME      | LOC    |</span><br><span class="line">+--------+------------+--------+</span><br><span class="line">|     40 | OPERATIONS | BOSTON |</span><br><span class="line">+--------+------------+--------+</span><br></pre></td></tr></table></figure>

<p>2.9、三张表怎么连接查询? 案例:找出每一个员工的部⻔名称以及工资等级。 EMP e +——-+——–+———+——–+ | empno | ename | sal | deptno | +——-+——–+———+——–+ | 7369 | SMITH | 800.00 | 20| | 7499 | ALLEN | 1600.00 | 30| | 7521|WARD |1250.00| 30| | 7566 | JONES | 2975.00 | 20| | 7654 | MARTIN | 1250.00 | 30| | 7698 | BLAKE | 2850.00 | 30| | 7782 | CLARK | 2450.00 | 10| | 7788 | SCOTT | 3000.00 | 20| | 7839|KING |5000.00| 10| | 7844 | TURNER | 1500.00 | 30| | 7876 | ADAMS | 1100.00 | 20| | 7900 | JAMES | 950.00 | 30| | 7902|FORD |3000.00| 20| | 7934 | MILLER | 1300.00 | 10|</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+---------+--------+</span><br><span class="line">DEPT d</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br></pre></td></tr></table></figure>

<ul>
<li><p>```<br>|      10 | ACCOUNTING | NEW YORK |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      20 | RESEARCH   | DALLAS   |</span><br></pre></td></tr></table></figure></li>
<li><p>```<br>|      30 | SALES      | CHICAGO  |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      40 | OPERATIONS | BOSTON   |</span><br><span class="line">  +--------+------------+----------+</span><br><span class="line">  SALGRADE s</span><br><span class="line">  +-------+-------+-------+</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| GRADE | LOSAL | HISAL |</span><br><span class="line">+-------+-------+-------+</span><br></pre></td></tr></table></figure></li>
<li><p>|  1|700|1200|</p>
</li>
<li><p>|  2| 1201| 1400|</p>
</li>
<li><p>|  3| 1401| 2000|</p>
</li>
<li><p>|  4| 2001| 3000|</p>
</li>
<li><p>|  5| 3001| 9999| +——-+——-+——-+</p>
<p>注意，解释一下:</p>
<p>….<br> A</p>
<p>join<br> B</p>
<p>join<br> C</p>
<p>on<br> …</p>
<p>表示:A表和B表先进行表连接，连接之后A表继续和C表进行连接。 select</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.ename,d.dname,s.grade</span><br></pre></td></tr></table></figure>

<p>from<br> emp e</p>
<p>join<br> dept d</p>
</li>
</ul>
<p>on</p>
<p>join on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno</span><br><span class="line">salgrade s</span><br><span class="line">e.sal between s.losal and s.hisal;</span><br><span class="line">+--------+------------+-------+</span><br><span class="line">| ename  | dname      | grade |</span><br><span class="line">+--------+------------+-------+</span><br></pre></td></tr></table></figure>

<p>| SMITH | RESEARCH | ALLEN | SALES |WARD |SALES<br> | JONES | RESEARCH | MARTIN | SALES</p>
<p>| 1| | 3| | 2| | 4| | 2|</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">| BLAKE</span><br><span class="line">| CLARK</span><br><span class="line">| SCOTT</span><br><span class="line">| KING</span><br><span class="line">| TURNER</span><br><span class="line">| ADAMS</span><br><span class="line">| JAMES</span><br><span class="line">| FORD</span><br></pre></td></tr></table></figure>

<p>| SALES | 4| | ACCOUNTING | 4| | RESEARCH | 4| | ACCOUNTING | 5| | SALES | 3| | RESEARCH | 1| | SALES | 1| | RESEARCH | 4| | ACCOUNTING | 2|</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| MILLER</span><br><span class="line">+--------+------------+-------+</span><br><span class="line">案例:找出每一个员工的部⻔名称、工资等级、以及上级领导。</span><br></pre></td></tr></table></figure>

<p>select<br> e.ename ‘员工’,d.dname,s.grade,e1.ename ‘领导’</p>
<p>from<br> emp e</p>
<p>join<br> dept d</p>
<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno</span><br><span class="line">salgrade s</span><br><span class="line">e.sal between s.losal and s.hisal</span><br></pre></td></tr></table></figure>

<p>emp e1 on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.mgr = e1.empno;</span><br></pre></td></tr></table></figure>

<p>+——–+————+——-+——-+<br> | 员工 |dname |grade| 领导 | +——–+————+——-+——-+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">join</span><br><span class="line">on</span><br><span class="line">left join</span><br></pre></td></tr></table></figure>

<p>|SMITH |RESEARCH |<br> | ALLEN | SALES |<br> |WARD |SALES |<br> |JONES |RESEARCH |<br> | MARTIN | SALES |<br> | BLAKE | SALES |<br> | CLARK | ACCOUNTING |<br> | SCOTT | RESEARCH |<br> | KING | ACCOUNTING |<br> | TURNER | SALES |<br> | ADAMS | RESEARCH |<br> | JAMES | SALES |<br> |FORD |RESEARCH |<br> | MILLER | ACCOUNTING | +——–+————+——-+——-+</p>
<p>3、子查询</p>
<p>3.1、什么是子查询?子查询都可以出现在哪里? select语句当中嵌套select语句，被嵌套的select语句是子查询。 子查询可以出现在哪里?</p>
<p>1|FORD | 3|BLAKE| 2|BLAKE| 4|KING | 2|BLAKE| 4|KING | 4|KING | 4|JONES| 5|NULL | 3|BLAKE| 1|SCOTT| 1|BLAKE| 4|JONES| 2|CLARK|</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">        ..(select).</span><br></pre></td></tr></table></figure>

<p>from</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        ..(select).</span><br><span class="line">where</span><br></pre></td></tr></table></figure>

<p>..(select).</p>
<p>3.2、where子句中使用子查询</p>
<p>案例:找出高于平均薪资的员工信息。<br> select * from emp where sal &gt; avg(sal); //错误的写法，where后面不能直接 使用分组函数。</p>
<p>第一步:找出平均薪资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select avg(sal) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br></pre></td></tr></table></figure>

<p>+————-+ 第二步:where过滤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        select * from emp where sal &gt; 2073.214286;</span><br><span class="line">        +-------+-------+-----------+------+------------+---------</span><br><span class="line">+------+--------+</span><br></pre></td></tr></table></figure>

<p>|EMPNO|ENAME|JOB |MGR |HIREDATE |SAL | COMM | DEPTNO |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        +-------+-------+-----------+------+------------+---------</span><br><span class="line">+------+--------+</span><br></pre></td></tr></table></figure>

<p>| 7566 | JONES | MANAGER | 7839 | 1981-04-02 | 2975.00 | NULL | 20|</p>
<p>| 7698 | BLAKE | MANAGER | 7839 | 1981-05-01 | 2850.00 | NULL | 30|</p>
<p>| 7782 | CLARK | MANAGER | 7839 | 1981-06-09 | 2450.00 | NULL | 10|</p>
<p>| 7788 | SCOTT | ANALYST | 7566 | 1987-04-19 | 3000.00 | NULL | 20|</p>
<p>| 7839 | KING | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL | 10|</p>
<p>| 7902 | FORD | ANALYST | 7566 | 1981-12-03 | 3000.00 | NULL | 20|</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        +-------+-------+-----------+------+------------+---------</span><br><span class="line">+------+--------+</span><br></pre></td></tr></table></figure>

<p>第一步和第二步合并:</p>
<p>select * from emp where sal &gt; (select avg(sal) from emp); 3.3、from后面嵌套子查询</p>
<p>案例:找出每个部⻔平均薪水的等级。 第一步:找出每个部⻔平均薪水(按照部⻔编号分组，求sal的平均值)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select deptno,avg(sal) as avgsal from emp group by deptno;</span><br><span class="line">+--------+-------------+</span><br><span class="line">| deptno | avgsal      |</span><br><span class="line">+--------+-------------+</span><br></pre></td></tr></table></figure>

<ul>
<li><p>```<br>|      10 | 2916.666667 |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      20 | 2175.000000 |</span><br></pre></td></tr></table></figure></li>
<li><p>|  30 | 1566.666667 |<br> +——–+————-+ 第二步:将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是: t.avgsal between s.losal and s.hisal</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">        t.*,s.grade</span><br></pre></td></tr></table></figure></li>
</ul>
<p>from</p>
<p>t join</p>
<p>on</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(select deptno,avg(sal) as avgsal from emp group by deptno)</span><br></pre></td></tr></table></figure>

<p>salgrade s</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t.avgsal between s.losal and s.hisal;</span><br><span class="line">+--------+-------------+-------+</span><br><span class="line">| deptno | avgsal      | grade |</span><br><span class="line">+--------+-------------+-------+</span><br></pre></td></tr></table></figure>

<ul>
<li><p>```<br>|      30 | 1566.666667 |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      10 | 2916.666667 |</span><br></pre></td></tr></table></figure></li>
<li><p>```<br>|      20 | 2175.000000 |<br>+——–+————-+——-+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  案例:找出每个部⻔平均的薪水等级。</span><br><span class="line">   第一步:找出每个员工的薪水等级。</span><br><span class="line">   select e.ename,e.sal,e.deptno,s.grade from emp e join salgrade s on e.sal between s.losal and s.hisal; +--------+---------+--------+-------+</span><br><span class="line">   | ename | sal | deptno | grade | +--------+---------+--------+-------+</span><br><span class="line"></span><br><span class="line">| SMITH | 800.00 |</span><br><span class="line"> | ALLEN | 1600.00 |</span><br><span class="line"> |WARD |1250.00|</span><br><span class="line"> | JONES | 2975.00 |</span><br><span class="line"> | MARTIN | 1250.00 |</span><br><span class="line"> | BLAKE | 2850.00 |</span><br><span class="line"> | CLARK | 2450.00 |</span><br><span class="line"> | SCOTT | 3000.00 |</span><br><span class="line"> |KING |5000.00|</span><br><span class="line"> | TURNER | 1500.00 |</span><br><span class="line"> | ADAMS | 1100.00 |</span><br><span class="line"> | JAMES | 950.00 |</span><br><span class="line"> |FORD |3000.00|</span><br><span class="line"> | MILLER | 1300.00 | +--------+---------+--------+-------+ 第二步:基于以上结果，继续按照deptno分组，求grade平均值。 select</span><br><span class="line"></span><br><span class="line">from</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>e.deptno,avg(s.grade)<br>emp e</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3 | 4 | 4 |</span><br><span class="line"></span><br><span class="line">20| 1| 30| 3| 30| 2| 20| 4| 30| 2| 30| 4| 10| 4| 20| 4| 10| 5| 30| 3| 20| 1| 30| 1| 20| 4| 10| 2|</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>join</p>
<pre><code>  salgrade s
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">on</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  e.sal between s.losal and s.hisal
</code></pre>
<p>group by</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">e.deptno;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>+——–+————–+<br>| deptno | avg(s.grade) |<br>+——–+————–+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- |  10 |</span><br><span class="line"></span><br><span class="line">- |  20 |</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      30 |</span><br><span class="line">  +--------+--------------+</span><br></pre></td></tr></table></figure>

<p>  3.4、在select后面嵌套子查询。 案例:找出每个员工所在的部⻔名称，要求显示员工名和部⻔名。</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">        e.ename,d.dname</span><br></pre></td></tr></table></figure>

<p>  from<br>   emp e</p>
<p>  join<br>   dept d</p>
<p>  on</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">        e.ename,(select d.dname from dept d where e.deptno =</span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d.deptno) as dname</span><br><span class="line">from</span><br></pre></td></tr></table></figure>

<p>  emp e;</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure>

<p>  4、union (可以将查询结果集相加)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3.6667 |</span><br><span class="line">2.8000 |</span><br><span class="line">2.5000 |</span><br></pre></td></tr></table></figure>

<p>案例:找出工作岗位是SALESMAN和MANAGER的员工?<br> 第一种:select ename,job from emp where job = ‘MANAGER’ or job = ‘SALESMAN’;<br> 第二种:select ename,job from emp where job in(‘MANAGER’,’SALESMAN’); +——–+———-+<br> |ename |job |<br> +——–+———-+<br> | ALLEN | SALESMAN |<br> | WARD | SALESMAN |<br> | JONES | MANAGER |<br> | MARTIN | SALESMAN |<br> | BLAKE | MANAGER |<br> | CLARK | MANAGER |<br> | TURNER | SALESMAN |<br> +——–+———-+<br> 第三种:union<br> select ename,job from emp where job = ‘MANAGER’<br> union<br> select ename,job from emp where job = ‘SALESMAN’; +——–+———-+<br> |ename |job |<br> +——–+———-+<br> | JONES | MANAGER |<br> | BLAKE | MANAGER |<br> | CLARK | MANAGER |<br> | ALLEN | SALESMAN |<br> | WARD | SALESMAN |<br> | MARTIN | SALESMAN |<br> | TURNER | SALESMAN |<br> +——–+———-+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">两张不相干的表中的数据拼接在一起显示?</span><br><span class="line">select ename from emp</span><br><span class="line">union</span><br><span class="line">select dname from dept;</span><br><span class="line">+------------+</span><br><span class="line">| ename      |</span><br><span class="line">+------------+</span><br><span class="line">| SMITH      |</span><br><span class="line">| ALLEN      |</span><br><span class="line">| WARD       |</span><br><span class="line">| JONES      |</span><br><span class="line">| MARTIN     |</span><br><span class="line">| BLAKE      |</span><br><span class="line">| CLARK      |</span><br><span class="line">| SCOTT      |</span><br><span class="line">| KING       |</span><br><span class="line">| TURNER     |</span><br><span class="line">| ADAMS      |</span><br><span class="line">| JAMES      |</span><br><span class="line">| FORD       |</span><br><span class="line">| MILLER     |</span><br><span class="line">| ACCOUNTING |</span><br><span class="line">| RESEARCH   |</span><br><span class="line">| SALES      |</span><br><span class="line">| OPERATIONS |</span><br><span class="line">+------------+</span><br><span class="line">mysql&gt; select ename,sal from emp</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select dname from dept;</span><br><span class="line">ERROR 1222 (21000): The used SELECT statements have a different</span><br><span class="line">number of columns</span><br></pre></td></tr></table></figure>

<p>5、limit (重点中的重点，以后分⻚查询全靠它了。) 5.1、limit是mysql特有的，其他数据库中没有，不通用。(Oracle中有一个相同的机</p>
<p>制，叫做rownum)</p>
<p>5.2、limit取结果集中的部分数据，这时它的作用。</p>
<p>5.3、语法机制:<br> limit startIndex, length</p>
<p>startIndex表示起始位置，从0开始，0表示第一条数据。 length表示取几个</p>
<p>案例:取出工资前5名的员工(思路:降序取前5个)<br> select ename,sal from emp order by sal desc; 取前5个:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select ename,sal from emp order by sal</span><br><span class="line">select ename,sal from emp order by sal</span><br></pre></td></tr></table></figure>

<p>desc limit 0, 5;<br> desc limit 5; 5.4、limit是sql语句最后执行的一个环节:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">from</span><br><span class="line">where</span><br><span class="line">group by</span><br><span class="line">having</span><br><span class="line">order by</span><br><span class="line">limit</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...;</span><br></pre></td></tr></table></figure>

<p>5<br> 1</p>
<p>2 3</p>
<p>4 6</p>
<p>5.5、案例:找出工资排名在第4到第9名的员工?<br> select ename,sal from emp order by sal desc limit 3,6; +——–+———+<br> | ename | sal |</p>
<p>7</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>

<p>5.6、通用的标准分⻚sql?</p>
<p>每⻚显示3条记录: 第1⻚:0, 3 第2⻚:3, 3 第3⻚:6, 3 第4⻚:9, 3 第5⻚:12, 3</p>
<p>每⻚显示pageSize条记录:<br> 第pageNo⻚:(pageNo - 1) * pageSize, pageSize</p>
<p>pageSize是什么?是每⻚显示多少条记录 pageNo是什么?显示第几⻚</p>
<p>java代码{<br> int pageNo = 2; // ⻚码是2</p>
<p>int pageSize = 10; // 每⻚显示10条<br> limit (pageNo - 1) * pageSize, pageSize</p>
<p>} 6、创建表:</p>
<p>建表语句的语法格式:<br> create table 表名(</p>
<p>字段名1 数据类型, 字段名2 数据类型, 字段名3 数据类型, ….</p>
<p>);</p>
<p>关于MySQL当中字段的数据类型?以下只说常⻅的<br> int 整数型(java中的int)<br> bigint ⻓整型(java中的long)<br> float 浮点型(java中的float double) char 定⻓字符串(String)</p>
<p>varchar 可变⻓字符串(StringBuffer/StringBuilder) date 日期类型 (对应Java中的java.sql.Date</p>
<p>类型)</p>
<p>BLOB 二进制大对象(存储图片、视频等流媒体信 息) Binary Large OBject (对应java中的Object)</p>
<p>CLOB 字符大对象(存储较大文本，比如，可以存储 4G的字符串。) Character Large OBject(对应java中的Object)</p>
<p>……</p>
<p>char和varchar怎么选择? 在实际的开发中，当某个字段中的数据⻓度不发生改变的时候，是定</p>
<p>⻓的，例如:性别、生日等都是采用char。 当一个字段的数据⻓度不确定，例如:简介、姓名等都是采用</p>
<p>varchar。</p>
<p>BLOB和CLOB类型的使用? 电影表: t_movie</p>
<p>id(int) name(varchar) playtime(date/ char) haibao(BLOB) history(CLOB)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">                 ---------------------------------------------------</span><br><span class="line">-------------------------------------</span><br></pre></td></tr></table></figure>

<p>1 蜘蛛侠 2<br> 3</p>
<p>表名在数据库当中一般建议以:t_或者tbl_开始。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建学生表:</span><br><span class="line">     学生信息包括:</span><br></pre></td></tr></table></figure>

<p>学号、姓名、性别、班级编号、生日 学号:bigint<br> 姓名:varchar<br> 性别:char</p>
<p>班级编号:int 生日:char</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table t_student(</span><br><span class="line">        no bigint,</span><br></pre></td></tr></table></figure>

<p>);</p>
<p>7、insert语句插入数据 语法格式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name varchar(255),</span><br><span class="line">sex char(1),</span><br><span class="line">classno varchar(255),</span><br><span class="line">birth char(10)</span><br></pre></td></tr></table></figure>

<p>insert into 表名(字段名1,字段名2,字段名3,….) values(值1,值2,值3,….)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">          要求:字段的数量和值的数量相同，并且数据类型要对应相同。</span><br><span class="line">        insert into t_student(no,name,sex,classno,birth)</span><br><span class="line">values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;);</span><br><span class="line">        ERROR 1136 (21S01): Column count doesn&#x27;t match value count</span><br><span class="line">at row 1</span><br><span class="line">        insert into t_student(no,name,sex,classno,birth)</span><br><span class="line">values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;);</span><br></pre></td></tr></table></figure>

<p>mysql&gt; select * from t_student; +——+———-+——+————+————+ |no |name |sex |classno |birth | +——+———-+——+————+————+ | 1 | zhangsan | 1 | gaosan1ban | 1950-10-12 | +——+———-+——+————+————+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        insert into t_student(name,sex,classno,birth,no)</span><br><span class="line">values(&#x27;lisi&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;,2);</span><br></pre></td></tr></table></figure>

<p>mysql&gt; select * from t_student; +——+———-+——+————+————+ |no |name |sex |classno |birth | +——+———-+——+————+————+</p>
<ul>
<li><p>```</p>
<pre><code>    |     1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |     2 | lisi     | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">          +------+----------+------+------------+------------+</span><br></pre></td></tr></table></figure>

<p>insert into t_student(name) values(‘wangwu’); // 除name字段之 外，剩下的所有字段自动插入NULL。</p>
<p>mysql&gt; select * from t_student; +——+———-+——+————+————+ |no |name |sex |classno |birth | +——+———-+——+————+————+</p>
</li>
<li><p>```</p>
<pre><code>    |     1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |     2 | lisi     | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">          | NULL | wangwu   | NULL | NULL       | NULL       |</span><br><span class="line">          +------+----------+------+------------+------------+</span><br></pre></td></tr></table></figure>

<p>insert into t_student(no) values(3);<br> mysql&gt; select * from t_student; +——+———-+——+————+————+ |no |name |sex |classno |birth | +——+———-+——+————+————+</p>
</li>
<li><p>```</p>
<pre><code>    |     1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- |  2 | lisi | 1 | gaosan1ban | 1950-10-12 | | NULL | wangwu | NULL | NULL | NULL | | 3|NULL |NULL|NULL | NULL | +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">  drop table if exists t_student; // 当这个表存在的话删除。 create table t_student(</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>             no bigint,
             name varchar(255),
             sex char(1) default 1,
             classno varchar(255),
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">8、表的复制 语法:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>birth char(10)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_student(name) values(&#x27;zhangsan&#x27;); mysql&gt; select * from t_student; +------+----------+------+---------+-------+ |no |name |sex |classno|birth| +------+----------+------+---------+-------+ |NULL|zhangsan|1 |NULL |NULL | +------+----------+------+---------+-------+</span><br><span class="line"></span><br><span class="line">需要注意的地方: 当一条insert语句执行成功之后，表格当中必然会多一行记录。 即使多的这一行记录当中某些字段是NULL，后期也没有办法在执行 insert语句插入数据了，只能使用update进行更新。</span><br><span class="line"></span><br><span class="line">// 字段可以省略不写，但是后面的value对数量和顺序都有要求。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  insert into t_student
</code></pre>
<p>values(1,’jack’,’0’,’gaosan2ban’,’1986-10-23’);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select * from t_student; +------+----------+------+------------+------------+ |no |name |sex |classno |birth | +------+----------+------+------------+------------+ | NULL | zhangsan | 1 | NULL | NULL | | 1 | jack | 0 | gaosan2ban | 1986-10-23 | +------+----------+------+------------+------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  insert into t_student values(1,&#39;jack&#39;,&#39;0&#39;,&#39;gaosan2ban&#39;);
  ERROR 1136 (21S01): Column count doesn&#39;t match value count
</code></pre>
<p>at row 1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 一次插入多行数据 insert into t_student</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>           (no,name,sex,classno,birth)
  values
           (3,&#39;rose&#39;,&#39;1&#39;,&#39;gaosi2ban&#39;,&#39;1952-12-14&#39;),
</code></pre>
<p>(4,’laotie’,’1’,’gaosi2ban’,’1955-12-14’);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; select * from t_student; +------+----------+------+------------+------------+ |no |name |sex |classno |birth | +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">create table 表名 as select语句; 将查询结果当做表创建出来。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>| NULL       | NULL       |<br>| gaosan2ban | 1986-10-23 |<br>| gaosi2ban  | 1952-12-14 |</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| NULL | zhangsan | 1</span><br><span class="line"> | 1|jack |0</span><br><span class="line"> | 3|rose |1</span><br><span class="line"> | 4 | laotie | 1 | gaosi2ban | 1955-12-14 | +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">9、将查询结果插入到一张表中?</span><br><span class="line"> mysql&gt; insert into dept1 select * from dept; mysql&gt; select * from dept1; +--------+------------+----------+</span><br><span class="line"> | DEPTNO | DNAME | LOC | +--------+------------+----------+</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |      10 | ACCOUNTING | NEW YORK |</span><br></pre></td></tr></table></figure></li>
<li><p>```</p>
<pre><code>    |      20 | RESEARCH   | DALLAS   |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |      30 | SALES      | CHICAGO  |</span><br></pre></td></tr></table></figure></li>
<li><p>```</p>
<pre><code>    |      40 | OPERATIONS | BOSTON   |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |      10 | ACCOUNTING | NEW YORK |</span><br></pre></td></tr></table></figure></li>
<li><p>```</p>
<pre><code>    |      20 | RESEARCH   | DALLAS   |
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">          |      30 | SALES      | CHICAGO  |</span><br></pre></td></tr></table></figure></li>
<li><p>```</p>
<pre><code>    |      40 | OPERATIONS | BOSTON   |
    +--------+------------+----------+
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">10、修改数据:update 语法格式:</span><br><span class="line"></span><br><span class="line">update 表名 set 字段名1=值1,字段名2=值2... where 条件; 注意:没有条件整张表数据全部更新。</span><br><span class="line"></span><br><span class="line">案例:将部⻔10的LOC修改为SHANGHAI，将部⻔名称修改为RENSHIBU</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>    update dept1 set loc = &#39;SHANGHAI&#39;, dname = &#39;RENSHIBU&#39; where
</code></pre>
<p>deptno = 10;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>    mysql&gt; select * from dept1;
    +--------+------------+----------+
    | DEPTNO | DNAME      | LOC      |
    +--------+------------+----------+
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      10 | RENSHIBU</span><br></pre></td></tr></table></figure></li>
<li><p>```<br>|      20 | RESEARCH</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- |  30 | SALES</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      40 | OPERATIONS | BOSTON   |</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| SHANGHAI |</span><br><span class="line">| DALLAS   |</span><br><span class="line">| CHICAGO  |</span><br></pre></td></tr></table></figure>

<ul>
<li><p>```<br>|      10 | RENSHIBU</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  |      20 | RESEARCH</span><br></pre></td></tr></table></figure></li>
<li><p>|  30 | SALES</p>
</li>
<li><pre><code>|      40 | OPERATIONS | BOSTON   |
+--------+------------+----------+
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">更新所有记录</span><br><span class="line"></span><br><span class="line">update dept1 set loc = &#x27;x&#x27;, dname = &#x27;y&#x27;; mysql&gt; select * from dept1; +--------+-------+------+ |DEPTNO|DNAME|LOC | +--------+-------+------+</span><br><span class="line"></span><br><span class="line">| 10|y |x | | 20|y |x | | 30|y |x | | 40|y |x | | 10|y |x | | 20|y |x |</span><br><span class="line"></span><br></pre></td></tr></table></figure>
| SHANGHAI |
| DALLAS   |
| CHICAGO  |
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| 30|y |x | | 40|y |x | +--------+-------+------+</span><br><span class="line"></span><br><span class="line">11、删除数据? 语法格式:</span><br><span class="line"></span><br><span class="line">delete from 表名 where 条件; 注意:没有条件全部删除。</span><br><span class="line"></span><br><span class="line">删除10部⻔数据?</span><br><span class="line"> delete from dept1 where deptno = 10;</span><br><span class="line"></span><br><span class="line">删除所有记录?</span><br><span class="line"></span><br></pre></td></tr></table></figure>
               delete from dept1;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">怎么删除大表中的数据?(重点)</span><br><span class="line"> truncate table 表名; // 表被截断，不可回滚。永久丢失。</span><br><span class="line"></span><br><span class="line">删除表?</span><br><span class="line"> drop table 表名; // 这个通用。</span><br><span class="line"></span><br><span class="line">drop table if exists 表名; // oracle不支持这种写法。</span><br><span class="line"></span><br><span class="line">12、对于表结构的修改，这里不讲了，大家使用工具完成即可，因为在实际开发中表一旦 设计好之后，对表结构的修改是很少的，修改表结构就是对之前的设计进行了否定，即使 需要修改表结构，我们也可以直接使用工具操作。修改表结构的语句不会出现在Java代码当 中。</span><br><span class="line"></span><br><span class="line">出现在java代码当中的sql包括:insert delete update select(这些都是表中的数 据操作。)</span><br><span class="line"></span><br><span class="line">增删改查有一个术语:CRUD操作</span><br><span class="line"> Create(增) Retrieve(检索) Update(修改) Delete(删除)</span><br><span class="line"></span><br><span class="line">13、约束(Constraint)</span><br><span class="line"></span><br><span class="line">13.1、什么是约束?常⻅的约束有哪些呢? 在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证</span><br><span class="line"></span><br></pre></td></tr></table></figure>
表中数据的
   合法性、有效性、完整性。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">常⻅的约束有哪些呢?</span><br><span class="line"> 非空约束(not null):约束的字段不能为NULL 唯一约束(unique):约束的字段不能重复</span><br><span class="line"> 主键约束(primary key):约束的字段既不能为NULL，也不能重复</span><br><span class="line"></span><br><span class="line">(简称PK) 没有，目前mysql不支持该约束。</span><br><span class="line"></span><br><span class="line">外键约束(foreign key):...(简称FK) 检查约束(check):注意Oracle数据库有check约束，但是mysql</span><br><span class="line"></span><br><span class="line">13.2、非空约束 not null</span><br><span class="line"> drop table if exists t_user;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      create table t_user(
               id int,
               username varchar(255) not null,
               password varchar(255)
      );
      insert into t_user(id,password) values(1,&#39;123&#39;);
      ERROR 1364 (HY000): Field &#39;username&#39; doesn&#39;t have a default
value
values(1,&#39;lisi&#39;,&#39;123&#39;);
insert into t_user(id,username,password)
</code></pre>
</li>
</ul>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：MySQL语法第二弹</li>
        <li>本文作者：Nico Liao</li>
        <li>创建时间：2021-11-05 16:18:05</li>
        <li>
            本文链接：https://www.lzp.zone/2021/11/05/MySQL语法第二弹/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/11/05/MySQL%E8%AF%AD%E6%B3%95%E7%AC%AC%E4%B8%89%E5%BC%B9/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">MySQL语法第三弹</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/11/03/Win-Mac%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%AF%B9%E7%85%A7%E8%A1%A8/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Win-Mac快捷键对照表</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;评论</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'KIssPt4MBUXkvSe9yAEy7pb2-gzGzoHsz',
                    appKey: '71OF5ao664Djvpz7aEonzprV',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 请尽情吐槽吧 ~',
                    lang: 'zh-CN'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Nico Liao';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Nico Liao</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
        
        
    </div>
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
